_Шаблоны могут использовать в качестве параметра источник настройки, что полезно при работе с несколькими источниками._

**Пример шаблона:**

Для коллекции books находит все книги, написанные автором с заданным ISBN.

Создайте новый шаблон, используя текст пайплайна:

```json
[
    {
        $match: {
            isbn: '${vars.isbn}'
        }
    },
    {
        $lookup: {
            from: '${sources.authors}',
            foreignField: 'name',
            localField: 'author',
            as: 'authors'
        }
    },
    {
        $unwind: {
            path: '$authors'
        }
    },
    {
        $lookup: {
            from: '${sources.books}',
            foreignField: 'author',
            localField: 'authors.name',
            as: 'books'
        }
    },
    {
        $unwind: {
            path: '$books'
        }
    },
    {
        $replaceRoot: {
            newRoot: '$books'
        }
    }
]
```
Параметризируйте шаблон и настройте переменные.

Выгрузите шаблон и сохраните его.

Перейдите в Настройку и примените шаблон.

> Чтобы опубликовать шаблон для всех пользователей, используйте функцию "Общий шаблон".